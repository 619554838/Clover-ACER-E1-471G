# Maintained by: Matthew
# Fix_USB.txt

# EHC1, EH01

into device name_adr 0x001D0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\}\) remove_matched;
into method label _DSM parent_adr 0x001D0000 remove_entry;
into device name_adr 0x001D0000 insert
begin
Name (_PRW, Package (0x02) { 0x0D, 0x03 })\n
Method (_DSM, 4, NotSerialized)\n
{\n
    If (LEqual (Arg2, Zero)) { Return (Buffer (One){ 0x03 }) }\n
    Return (Package (0x04)\n
    {\n
        "device-id", Buffer (0x04) { 0x34, 0x3A, 0x00, 0x00 }, \n 
        "built-in", Buffer (0x01) {0x01}, \n
        "device_type", Buffer (0x05) { "EHCI" }, \n
        "AAPL,clock-id", Buffer (0x01) { 0x00 }, \n
        "AAPL,current-available", 0x05DC, \n
        "AAPL,current-extra", 0x03E8, \n
        "AAPL,current-in-sleep", 0x0BB8, \n
        Buffer (0x01) { 0x00 } \n
    })\n
}\n
end;


# EHC2, EH02
into device name_adr 0x001A0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\}\) remove_matched;
into method label _DSM parent_adr 0x001A0000 remove_entry;
into device name_adr 0x001A0000 insert
begin
Name (_PRW, Package (0x02) { 0x0D, 0x03 })\n
Method (_DSM, 4, NotSerialized)\n
{\n
    If (LEqual (Arg2, Zero)) { Return (Buffer (One){ 0x03 }) }\n
    Return (Package (0x04)\n
    {\n
        "device-id", Buffer (0x04) { 0x37, 0x3A, 0x00, 0x00 }, \n 
        "built-in", Buffer (0x01) { 0x02 }, \n
        "device_type", Buffer (0x05) { "EHCI" }, \n
        "AAPL,clock-id", Buffer (0x01) { 0x00 }, \n
        "AAPL,current-available", 0x05DC, \n
        "AAPL,current-extra", 0x03E8, \n
        "AAPL,current-in-sleep", 0x0BB8, \n
        Buffer (0x01) { 0x00 } \n
    })\n
}\n
end;
